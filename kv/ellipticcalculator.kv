#:import MDTextField kivymd.textfields.MDTextField
#:import MDChooseChip kivymd.chips.MDChooseChip
#:import MDChip kivymd.chips.MDChip


<Test>:
    orientation: 'vertical'
    curve_data:curve_data
    action: action
    dropdown: dropdown
    input1: input1
    input2: input2
    result_input: result_input
    on_parent:
        self.on_create()
        self.dropdown.dismiss()

    CustomDropDown:
        id: dropdown
        on_select:
            setattr(root.action, 'text', self.data)
            root.inputs_update()

    BoxLayout:
        size_hint_y: .05

    AnchorLayout:
        size_hint_y: .1
        anchor_x: 'center'
        anchor_y: 'center'
        BoxLayout:
            size_hint_x: .8
            spacing: self.width//200
            padding: [self.width//200,self.height//15]
            Label:
                size_hint_x: .1
                text:'E'
                text_size: self.width, self.height
                font_size: self.height
                halign: 'right'
                valign: 'bottom'
            CustomTextInput:
                id:curve_data
                hint_text: 'p(a,b)'
                on_text: root.inputs_update()
                font_size: self.height//1.75

    BoxLayout:
        size_hint_y: .1

    AnchorLayout:
        size_hint_y: .3
        anchor_x: 'center'
        anchor_y: 'center'
        BoxLayout:
            size_hint_x: .9
            orientation: 'vertical'
            spacing: self.height//50
            BoxLayout:
                BoxLayout:
                    orientation: 'vertical'
                    spacing: 1
                    CustomTextInput:
                        id: input1
                        hint_text: 'x,y'
                        on_text: root.inputs_update()
                        text_size: self.width, self.height
                        font_size: self.height//2
                    CustomTextInput:
                        id: input2
                        hint_text: 'x,y'
                        on_text: root.inputs_update()
                        text_size: self.width, self.height
                        font_size: self.height//2
                    ReadOnlyTextInput:
                        id: result_input
                        hint_text:'Результат'
                        text_size: self.width, self.height
                        font_size: self.height//2
                BoxLayout:
                    size_hint_x: .3
                    orientation: 'vertical'
                    spacing: 1
                    padding:1
                    Button:
                        text: '+'
                        id: action
                        background_color: .14,.14,.17, 1
                        font_size: self.height//2
                        on_release:
                            setattr(root.dropdown,'max_height',self.height//0.75)
                            root.dropdown.open(self)
                    Button:
                        text: '='
                        on_press: root.result()
                        background_color: 1, 0.2, 0.1, .9

<EllipticCalculator>:
    orientation: 'vertical'
    AnchorLayout:
        size_hint: 1, .48
        anchor_x: 'center'
        anchor_y: 'center'
        BoxLayout:
            size_hint: .9, 1
            orientation: 'vertical'
            MDTextField:
                hint_text: "Параметры кривой p(a, b)"
                hint_text_color: 1,1,1,.8

            BoxLayout:

                MDTextField:
                    hint_text: "x, y"

                Button:
                    text: '+'
                    height: self.parent.children[0].height

                MDTextField:
                    hint_text: "x, y"


            MDTextField:
                hint_text: "Результат"

    Widget:
        size_hint_y: .52
